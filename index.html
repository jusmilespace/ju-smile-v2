<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Ju Smile 減脂日誌 v2.3</title>
  <meta name="theme-color" content="#97d0ba" />
  <link rel="manifest" href="manifest.json">
  <link rel="apple-touch-icon" href="icon-192.png">
  <link rel="icon" href="icon-192.png" sizes="192x192">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header class="site-header">
    <div class="brand">
      <div class="logo"></div>
      <div class="name">Ju Smile 減脂日誌</div>
    </div>
    <nav class="toolbar">
      <button id="btnSyncHelp" class="btn-ghost" type="button">跨裝置同步說明</button>
      <button id="btnExport" class="btn-ghost" type="button">匯出</button>
      <button id="btnImport" class="btn-ghost" type="button">匯入</button>
      <input type="file" id="importFile" accept="application/json" hidden />
    </nav>
  </header>

  <div class="tabs wrap">
    <button class="tab active" data-tab="log" type="button">日誌</button>
    <button class="tab" data-tab="report" type="button">報表</button>
  </div>

  <main class="wrap tab-panel" data-panel="log">
    <section class="card">
      <h2>📅 選擇日期</h2>
      <div class="grid grid-3">
        <label class="field">
          <span class="label">日期</span>
          <input type="date" id="datePicker" />
        </label>
        <div class="field row-gap-s">
          <span class="label">快速切換</span>
          <div class="row">
            <button class="btn" data-shift="-1" id="prevDay" type="button">前一天</button>
            <button class="btn" data-shift="0" id="todayBtn" type="button">今天</button>
            <button class="btn" data-shift="1" id="nextDay" type="button">後一天</button>
          </div>
        </div>
        <label class="field">
          <span class="label">體重（kg）</span>
          <div class="row">
            <input type="number" id="weightInput" min="0" step="0.1" placeholder="今天量的體重">
            <button class="btn" id="saveWeight" type="button">保存</button>
          </div>
        </label>
      </div>
    </section>

    <section class="card">
      <h2>💧 喝水追蹤</h2>
      <div class="grid grid-3">
        <label class="field">
          <span class="label">每日目標（ml）</span>
          <input type="number" id="waterGoal" min="0" step="100" placeholder="預設 2000" />
        </label>
        <label class="field">
          <span class="label">自訂輸入 (ml)</span>
          <div class="row">
            <input type="number" id="waterInput" min="0" step="50" placeholder="輸入數量" />
            <button class="btn" id="addWater" type="button">加入</button>
          </div>
        </label>
        <div class="field">
          <span class="label">快速加入</span>
          <div class="row">
            <button class="btn" data-water="200" type="button">+200</button>
            <button class="btn" data-water="500" type="button">+500</button>
          </div>
        </div>
      </div>
      <div class="progress">
        <div class="bar" id="waterBar" style="width:0%"></div>
      </div>
      <details class="mt-s">
        <summary>今日喝水明細</summary>
        <ul id="waterList" class="list"></ul>
      </details>
    </section>

    <section class="card">
      <h2>🍱 食物紀錄</h2>
      <div id="foodList" class="stack gap-s"></div>
      <button id="addFood" class="btn wide" type="button">新增食物</button>
      <div class="totals">
        <div>熱量：<strong id="calTotal">0</strong> kcal</div>
        <div>蛋白質：<strong id="proteinTotal">0</strong> g</div>
      </div>
    </section>

    <section class="card">
      <h2>🏃‍♀️ 運動紀錄</h2>
      <div id="workoutList" class="stack gap-s"></div>
      <button id="addWorkout" class="btn wide" type="button">新增運動</button>
      <div class="totals">
        <div>消耗熱量：<strong id="burnTotal">0</strong> kcal</div>
        <div>總時長：<strong id="durationTotal">0</strong> 分鐘</div>
      </div>
    </section>

    <section class="card">
      <h2>🧾 今日概況</h2>
      <div class="capsules" id="todayCapsules"></div>
      <p class="muted">※ 資料皆以日期為鍵存於瀏覽器 localStorage。跨裝置請用右上角「匯出/匯入」或閱讀「跨裝置同步說明」。</p>
    </section>
  </main>

  <section class="wrap tab-panel hidden" data-panel="report">
    <section class="card">
      <h2>📈 體重趨勢</h2>
      <div class="row">
        <div class="btn-group">
          <button class="btn-ghost sm" data-range="7" type="button">最近 7 天</button>
          <button class="btn-ghost sm" data-range="30" type="button">最近 30 天</button>
          <button class="btn-ghost sm" data-range="90" type="button">最近 90 天</button>
        </div>
      </div>
      <div class="chart-wrap">
        <canvas id="weightChart" width="900" height="360"></canvas>
      </div>
      <p class="muted">提示：請在「日誌」分頁每天輸入體重，這裡會顯示趨勢線與高低點。</p>
    </section>
  </section>

  <datalist id="foodMaster">
    <option value="雞胸肉"></option>
    <option value="雞蛋"></option>
    <option value="糙米飯"></option>
    <option value="豆腐"></option>
    <option value="優格"></option>
    <option value="燕麥"></option>
    <option value="地瓜"></option>
  </datalist>

  <datalist id="workoutMaster">
    <option value="健走"></option>
    <option value="跑步"></option>
    <option value="重訓"></option>
    <option value="飛輪"></option>
    <option value="游泳"></option>
    <option value="瑜伽"></option>
  </datalist>

  <div id="syncModal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="syncTitle">
    <div class="modal-backdrop" data-close></div>
    <div class="modal-card">
      <h3 id="syncTitle">跨裝置同步（手動）</h3>
      <ol class="num">
        <li><strong>在裝置 A</strong> 點右上角 <em>匯出</em>，下載 <code>ju-smile-v2-data-YYYY-MM-DD.json</code>。</li>
        <li>把檔案傳到 <strong>裝置 B</strong>（AirDrop / LINE / WhatsApp / 雲端硬碟）。</li>
        <li><strong>在裝置 B</strong> 打開本 App → 點 <em>匯入</em> → 選 JSON 檔。</li>
      </ol>
      <div class="row end">
        <button class="btn-ghost" data-close type="button">了解了</button>
      </div>
    </div>
  </div>

  <div id="toast" class="toast hidden" role="status" aria-live="polite"></div>

  <footer class="site-footer">
    <small>© Ju Smile 減脂日誌 v2.3 · 支援離線使用</small>
  </footer>

  <script src="app.js"></script>
</body>
</html>
